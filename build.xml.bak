<project name="communiiity" default="version" basedir=".">
    <property file="build.properties" />
    
    <target name="version" if="version.file">
        <propertyfile file="version.properties">
            <entry key="build" type="int" operation="+" default="0" />
        </propertyfile>
    
        <copy overwrite="true" file="${version.stub}" toFile="${version.file}" />
    
        <replace file="${version.file}" propertyFile="version.properties">
            <replacefilter token="@version@" property="version" />
            <replacefilter token="@build@" property="build" />
        </replace>
    </target>

    <target name="package" if="version.file" depends="target,cleanupPackaging,zipPackageDevsite">
        <!-- will all of the steps here work? -->

        <echo message="building the package" />

    </target>

    <target name="cleanupPackaging">
        <delete dir="${package.dir}$/" />
    </target>
    
    <target name="zipPackage" depends="delDirFromPackage">
        <zip destfile="${package.dir}/${package.name}" basedir="${basedir}" />
    </target>
    
    <target name="zipPackageDevsite" depends="delDirFromPackage">
        <zip destfile="${package.dir}/${package.name}" basedir="${basedir}/devsite/" />
    </target>

</project>
